# MRS - 情绪感知音乐推荐系统

这是一个基于情绪识别的智能音乐推荐系统，它能够通过摄像头实时捕捉用户的面部表情，结合用户所处的环境和时间，为用户推荐最适合的音乐。

## 功能特点

- **实时情绪识别**：通过摄像头实时捕捉用户面部表情，识别用户当前情绪状态
- **多维度推荐**：结合用户情绪、所处环境和时间三个维度进行音乐推荐
- **个性化音乐风格**：支持多种音乐风格选择，包括古典、流行、摇滚、民谣、爵士、电子和轻音乐
- **智能推荐算法**：基于用户历史数据动态调整推荐权重
- **用户行为分析**：记录并分析用户的音乐选择习惯，不断优化推荐效果

## 系统架构

系统主要包含以下核心模块：

1. **情绪识别模块**
   - 使用OpenCV进行人脸检测
   - 采用深度学习模型进行表情识别
   - 支持7种基本情绪：愤怒、厌恶、恐惧、开心、悲伤、惊讶、自然

2. **环境感知模块**
   - 支持多种场景：卧室、客厅、办公地点、浴室
   - 根据不同场景特点调整音乐推荐策略

3. **时间感知模块**
   - 自动识别当前时间段
   - 根据时间特征调整音乐风格权重

4. **推荐引擎**
   - 多因素加权计算
   - 动态概率分配
   - 个性化风格匹配

## 环境要求

- Python 3.x
- OpenCV
- TensorFlow
- NumPy
- Pandas
- Tkinter (GUI界面)

## 主要文件说明

- `music_recommendation.py`: 主程序文件，包含GUI界面和核心推荐逻辑
- `mrs.py`: 推荐算法核心实现
- `haarcascade_frontalface_default.xml`: OpenCV人脸检测模型
- `fer2013_mini_XCEPTION.119-0.65.tflite`: 表情识别模型
- `user.csv`: 用户数据记录文件
- `emo.csv`: 情绪数据记录文件

## 使用说明

1. 确保系统已安装所需的依赖包
2. 运行 `music_recommendation.py` 启动程序
3. 选择当前所处环境（卧室/客厅/办公地点/浴室）
4. 选择喜好的音乐风格（可多选，最多3个）
5. 面对摄像头，系统会自动识别情绪
6. 点击"搜索"按钮获取音乐推荐

## 推荐算法说明

系统采用多维度加权计算方式进行推荐：
- 情绪权重：70%
- 环境权重：20%
- 时间权重：10%

根据计算得出的综合得分，系统会推荐相应情绪类型的音乐，并结合用户的音乐风格偏好进行最终推荐。

## 注意事项

1. 首次使用时需要允许程序访问摄像头
2. 确保摄像头画面清晰，光线充足
3. 推荐间隔大于30秒时系统才会记录用户选择数据
4. 音乐风格选择不要超过3个




